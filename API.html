<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>Robot Arm API â€” Swagger UI</title>
  <link rel="stylesheet" href="swagger-ui-dist/swagger-ui.css">
  <style>
    body { margin: 0; }
    #swagger { max-width: 1200px; margin: 0 auto; }
  </style>
</head>
<body>
  <div id="swagger"></div>

  <script src="swagger-ui-dist/swagger-ui-bundle.js"></script>
  <script>
const spec = {
  openapi: "3.0.3",
  info: {
    title: "Robot Arm API",
    version: "1.0.0",
    description: "Endpoints used to control Servos and magnets for the Robot arm."
  },
  servers: [
    { url: "http://raspberrypi.local:8080", description: "RoccoNet" },
    { url: "http://172.20.10.6:8080", description: "noahiphone hotspot network" }
  ],
  tags: [{ name: "control", description: "Robot API Control" }],
  paths: {
    "/magnet": {
      get: {
        tags: ["control"],
        summary: "Toggle electromagnet",
        parameters: [
          {
            in: "query",
            name: "status",
            required: true,
            schema: { type: "string", enum: ["on", "off"] },
            description: "Turn magnet on or off",
            example: "on"
          }
        ],
        responses: {
          "200": {
            description: "OK",
            content: {
              "application/json": {
                schema: {
                  type: "object",
                  properties: {
                    ok: { type: "boolean" },
                    message: { type: "string" }
                  }
                },
                examples: {
                  on:  { value: { ok: true, message: "Magnet on" } },
                  off: { value: { ok: true, message: "Magnet off" } }
                }
              }
            }
          }
        }
      }
    },

    "/servos": {
      get: {
        tags: ["control"],
        summary: "Set turntable, seg1 and seg2 servo target angles",
        parameters: [
          { in: "query", name: "turntable", required: true,
            schema: { type: "number", format: "float", minimum: -180, maximum: 180 }, example: 0 },
          { in: "query", name: "seg_1", required: true,
            schema: { type: "number", format: "float", minimum: -180, maximum: 180 }, example: 0 },
          { in: "query", name: "seg_2", required: true,
            schema: { type: "number", format: "float", minimum: -180, maximum: 180 }, example: 0 }
        ],
        responses: {
          "200": {
            description: "OK",
            content: {
              "application/json": {
                schema: {
                  type: "object",
                  properties: {
                    ok: { type: "boolean" },
                    turntable: { type: "number" },
                    seg_1: { type: "number" },
                    seg_2: { type: "number" }
                  }
                },
                example: { ok: true, turntable: 0, seg_1: 0, seg_2: 0 }
              }
            }
          },
          "400": { description: "Bad request (invalid parameter)" }
        }
      }
    },

    "/stop": {
      get: {
        tags: ["control"],
        summary: "Stops WebServer",
        responses: {
          "200": {
            description: "Server will shut down after responding",
            content: {
              "application/json": {
                schema: { type: "object", properties: { ok: { type: "boolean" }, message: { type: "string" } } },
                example: { ok: true, message: "Shutting down..." }
              }
            }
          }
        }
      }
    }
  }
};
SwaggerUIBundle({ spec, dom_id: "#swagger", deepLinking: true, tryItOutEnabled: true, persistAuthorization: true });
</script>
</body>
</html>

